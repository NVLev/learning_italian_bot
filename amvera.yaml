meta:
  environment: python
  toolchain:
    name: python
    version: "3.12"

build:
  artifacts:
    - requirements.txt
    - "**/*.py"
    - "**/folders/**"
    - docker-compose.yaml

pre_run:
  steps:
    - apt-get update && apt-get install -y docker.io docker-compose
    - docker-compose up -d

run:
  command: |
    pip install -r requirements.txt
    python main.py
  persistenceMount: /data
  env:
    - name: POSTGRES_DB
      value: learning_language
    - name: POSTGRES_USER
      value: user
    - name: POSTGRES_PASSWORD
      value: password
    - name: POSTGRES_HOST
      value: pg
    - name: POSTGRES_PORT
      value: "5432"